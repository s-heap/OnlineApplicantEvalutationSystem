

from db import get_connection

from bson import ObjectId

mongo = db.get_connection()
print(db.get_jobs_list_specific(mongo, "5c7bfadc0c233c76dbed232a"))
def test_establish_connection():
    db.get_connection()

def test_get_dropdown_lists_returns():
    db.get_drop_down_lists(mongo)

def test_get_dropdown_lists_returns_correctly():
    assert db.get_drop_down_lists(mongo) == {'University Attended': ['Imperial College London', 'University of Manchester', 'University of Cambridge', 'Newcastle University', 'Durham University', 'University of Warwick', 'University of Glasgow', 'University of Exeter', 'University of Nottingham', 'University of Bristol', 'University College London', 'University of Edinburgh', 'Princeton University', 'University of Illinois at Urbana-Champaign', 'University of California', 'Harvard University', 'Seoul National University', 'Carnegie Mellon University', 'Northwestern University', 'University of Sheffield', 'University of Liverpool', 'University of Toronto', 'Duke University', 'Swiss Federal Institute of Technology Zurich', 'Paris Sciences & Lettres – PSL University', 'California Institute of Technology', 'National University of Singapore', 'University of Texas at Austin', 'London School of Economics and Political Science', 'Cornell University', 'Tsinghua University', 'The University of Tokyo', 'Kyoto University', 'Queen’s University Belfast', 'University of Southampton', 'Queen Mary University of London', 'University of York', 'Johns Hopkins University', 'University of Pennsylvania', 'Columbia University', 'University of Melbourne', 'Peking University', 'Lomonosov Moscow State University', 'McGill University', 'University of Michigan', 'University of Oxford', 'University of Hong Kong', 'Pennsylvania State University', 'Georgia Institute of Technology', 'New York University', 'University of Wisconsin-Madison\t', 'University of British Columbia', 'Yale University', 'University of Birmingham', 'University of Washington', 'Cardiff University', 'LMU Munich', 'University of Leeds', 'École Polytechnique Fédérale de Lausann', 'Massachusetts Institute of Technology', 'University of Chicago', 'Stanford University\tUnited States'], 'Degree Qualification': ['Physics, MPhys', 'Mathematics and Statistics, MMathStat', 'Mathematics and Philosophy, BA', 'Law and Sociology, BA', 'Law, BA', 'Law with Humanities, BA', 'Mathematics and Statistics, BSc', 'Discrete Mathematics, MEng', 'Mathematics and Physics, MMathPhys', 'Economic Studies and Global Sustainable Development, BA', 'Civil Engineering, MEng', 'Mathematics, MMath', 'Computer Systems Engineering, MEng', 'Mathematics and Physics, BSc', 'Systems Engineering, BEng', 'Management, BSc', 'Economics, Politics and International Studies, BA', 'Data Analytics, MSc', 'Data Science, BSc', 'Electrical and Electronic Engineering (MEng)', 'Physics with Business Studies, BSc', 'Physics, BSc', 'Business Studies, BA', 'Mathematics, BSc', 'Chemistry, BSc', 'Electrical and Electronic Engineering (BEng)', 'Law with Social Sciences, BA', 'Electronic Engineering, MEng', 'Engineering, MEng', 'Systems Engineering, MEng', 'Computer Science, MEng', 'Computer Science, BSc', 'Biochemistry, BSc', 'Philosophy, Politics and Economics, BA', 'Computer Systems Engineering, BSc', 'Law and Business Studies, BA', 'Computer Science, MSc', 'Philosophy with Psychology, BA', 'Economics, BA', 'Computer and Management Sciences, BSc', 'Discrete Mathematics, BSc', 'Biological Sciences, MBio', 'Statistics, BSc', 'Politics, Philosophy and Law, BA', 'MMORSE', 'Philosophy and Literature, BA', 'Biochemistry, MBio', 'Politics, BA', 'Biological Sciences, BSc', 'Electronic Engineering, BEng', 'Politics and Sociology, BA', 'Engineering Business Management, BA', 'Engineering, BEng', 'Chemistry, MChem', 'Civil Engineering, BSc', 'Economics and Industrial Organisation, BA'], 'Hobbies': ['Competitive eating', 'Hooping', 'Juggling', 'Karate', 'Soapmaking', 'Book restoration', 'Cheerleading', 'Flower collecting and pressing', 'Gambling', 'Moto GP', 'Photography', 'Polo', 'Trains', 'Whittling', 'Music', 'Body building', 'Bridge', 'Calligraphy', 'Football', 'Horse riding', 'Jewelry making', 'Parachuting', 'Stamp collecting', 'Baking', 'Hiking', 'Sculpting', 'Sewing', 'Blacksmithing', 'Golf', 'Skiing', 'Knife throwing', 'Kart racing', 'Lotology', 'Podcasting', 'Singing', 'Boxing', 'Gongoozling', 'Book collecting', 'Chess', 'Metal detecting', 'Mycology', 'Running', 'Comedy', 'Fencing', 'Fossil hunting', 'Geocaching', 'Musicals', 'Painting', 'Weight lifting', 'Animal fancy', 'Cabaret', 'Archery', 'BASE jumping', 'Speedcubing', 'Gardening', 'Leather working', 'Roller blading', 'Debate', 'Netball', 'Farming', 'Phillumeny', 'Beatboxing', 'Beekeeping', 'Glass blowing', 'Mahjong', 'Fire poi', 'Improv', 'Stand-up', 'Acrobatics', 'Board games', 'Laser tag', 'Origami', 'Surfing', 'Anime', 'Brewing', 'Cooking', 'Dinosaurs', 'Escape rooms', 'Gymnastics', 'Perfume', 'Salsa', 'Antiquing', 'Coin collecting', 'Drama', 'Extreme sports', 'Lacrosse', 'Ballroom dancing', 'Baton twirling', 'Modelling', 'Tabletop gaming', 'Theatre', 'Vintage art', 'Darts', 'Scrapbooking', 'Streaming', 'Tango', 'Parkour', 'Basketball', 'Hockey', 'Judo', 'Yoga', 'Airsoft', 'Creative writing', 'Insect collecting', 'Cars', 'Knitting', 'Tai chi', 'Logic puzzles', 'Foraging', 'Flying disc', 'Jeet kun do', 'Woodworking', 'Scuba diving', 'Ice skating', 'Sword swallowing', 'Athletics', 'Embroidery', 'Travelling', 'Animation', 'Crosswords', 'Dog training', 'Powerlifting', 'Swimming', 'Reading', 'Magic', 'Yo-yoing', 'Break dancing', 'Graffiti', 'Gold prospecting', '3D printing', 'Poetry', 'Formula 1', 'Skateboarding', 'Shooting', 'DIY', 'Comic books', 'Pottery', 'Bird watching', 'Rugby', 'Tennis', 'Gaming', 'Seashell collecting', 'Wrestling', 'Cycling', 'Astronomy', 'Rock climbing', 'Dowsing', 'Ghost hunting', 'Ghost hunting', 'Movies', 'Whale watching'], 'Previous Employment Position': ['Senior Manager', 'Senior Software Developer', 'Systems Analyst', 'Technology Architect', 'Web Developer', 'Senior Architect', 'Software Tester', 'Consultant', 'Associate Manager', 'Project Lead', 'Project Manager', 'Module Lead', 'Software Developer', 'Technical Support', 'Technology Specialist', 'Senior Software Tester', 'Senior Web Developer', 'Technical Lead', 'Senior Systems Analyst', 'Senior Consultant'], 'A-Level Qualifications': ['Health and Social Care ', 'History of Art ', 'Human Biology ', 'Drama ', 'Economics and Business ', 'Technology and Design ', 'Food Technology ', 'Further Mathematics', 'Mathematics', 'Persian ', 'Fashion and Textiles ', 'Irish ', 'Japanese ', 'Philosophy ', 'Physical Education ', 'Communication and Culture ', 'Marine Science ', 'Photography', 'Religious Studies ', 'Design and Technology ', 'Travel and Tourism ', 'Chemistry', 'Critical Thinking ', 'Russian ', 'Afrikaans ', 'Music ', 'Environmental Studies ', 'Polish ', 'Food Studies ', 'Science in Society ', 'Digital Technology ', 'German ', 'Product Design ', 'Statistics ', 'Archaeology ', 'Hindi ', 'Digital Media and Design ', 'English Language and Literature ', 'Design and Textiles ', 'Humanities ', 'Performance Studies ', 'Dutch ', 'Italian ', 'Portuguese ', 'Business Studies ', 'Dance ', 'Environmental Science ', 'Information Technology ', 'Music Technology ', 'Software Systems Development ', 'Tamil ', 'Art and Design ', 'Drama and Theatre ', 'French ', 'Law ', 'Media Studies ', 'Thinking Skills ', 'Islamic Studies ', 'Government and Politics ', 'Geology ', 'Bengali ', 'Moving Image Arts ', 'Greek ', 'Accounting', 'Applied Business ', 'Environmental Technology ', 'Home Economics ', 'Professional Business Services ', 'Divinity ', 'Quantitative Methods ', 'Biology', 'Electronics ', 'English Literature ', 'Film Studies ', 'Leisure Studies ', 'Life and Health Sciences ', 'Applied Science ', 'Panjabi ', 'ICT ', 'Creative Writing ', 'Performing Arts ', 'Global Perspectives and Research ', 'English Language ', 'Applied ICT ', 'Systems and Control Technology ', 'Applied Art and Design ', 'Turkish', 'Chinese ', 'Classical Greek ', 'Modern Languages ', 'General Studies ', 'Engineering ', 'Psychology ', 'Modern Hebrew ', 'Gujarati ', 'Spanish ', 'Classical Studies ', 'Geography ', 'Politics ', 'Hinduism ', 'Anthropology ', 'Business ', 'Classical Civilisation ', 'Citizenship Studies ', 'Journalism ', 'Sociology ', 'Ancient History ', 'Computing', 'History ', 'Global Development ', 'Latin ', 'Physics', 'Arabic ', 'Computer Science', 'Sports Science ', 'Economics ', 'Nutrition and Food Science '], 'Languages Known': ['Assembly', 'BASIC', 'C++', 'Executable UML', 'HTML', 'High Level Assembly', 'LaTeX', 'Mathematica', 'Perl', 'PostScript', 'R', 'Ruby', 'Ruby-on-rails', 'SQL', 'TeX', 'UNITY', 'Visual Basic', 'Visual Basic .NET', 'C', 'Fortran', 'JSON', 'Java', 'MATLAB', 'Prolog', 'Python', 'Scala', 'C#', 'Haskell', 'Unix Shell', 'Bash', 'Lisp', 'CUDA', 'Visual J++', 'COBOL', 'JavaScript', 'PhP', 'Pascal', 'Go!', 'SPARK', 'JScript', 'Objective-C', 'Batch File', 'R++', 'Hack', 'MySQL'], 'Skills': ['Data Entry', 'Chinese', 'Flute', 'Fundraising', 'German', 'Motivated', 'Negotiating', 'Text Editing', 'Access', 'French', 'Google analytics', 'Guitar', 'Publisher', 'Content Creation', 'Time management', 'Keynote', 'Powerpoint', 'Public Speaking', 'Word', 'Accounting', 'Japanese', 'Mentoring', 'Networking', 'Google Drive', 'Search engine optimization', 'Team work', 'Video Editing', 'Quality Assurance', 'Skype', 'Evernote', 'Piano', 'Slack', 'Event Planning', 'Backup management', 'Conflict resolution', 'Constructive criticism', 'Marketing', 'Smartphones', 'Adobe Photoshop', 'Italian', 'Online collaboration', 'Social media management', 'Graphic Design', 'Payroll', 'Leadership', 'Research', 'Troubleshooting', 'Excel', 'Tablets']}

def test_get_candidate_cv():
    db.get_candidate_cv(mongo, "5c7bfadc0c233c76dbed232a")

def test_get_candidate_cv_normal():
    assert db.get_candidate_cv(mongo, "5c7bfadc0c233c76dbed232a") == {'_id': ObjectId('5c7bfadc0c233c76dbed232a'), 'CVData': {'Name': 'Jaunita Adell', 'Degree Qualification': 'Physics, MPhys', 'Degree Level': '2:1', 'University Attended': 'Princeton University', 'A-Level Qualifications': [{'Subject': 'Mathematics', 'Grade': 'A'}, {'Subject': 'Japanese ', 'Grade': 'A'}, {'Subject': 'English Language and Literature ', 'Grade': 'A'}, {'Subject': 'Irish ', 'Grade': 'A'}], 'Languages Known': [{'Language': 'Visual Basic .NET', 'Expertise': 9}, {'Language': 'Ruby', 'Expertise': 9}, {'Language': 'C++', 'Expertise': 4}, {'Language': 'HTML', 'Expertise': 6}, {'Language': 'Ruby-on-rails', 'Expertise': 6}, {'Language': 'Executable UML', 'Expertise': 8}, {'Language': 'UNITY', 'Expertise': 4}, {'Language': 'TeX', 'Expertise': 6}, {'Language': 'LaTeX', 'Expertise': 6}, {'Language': 'High Level Assembly', 'Expertise': 9}, {'Language': 'Visual Basic', 'Expertise': 5}, {'Language': 'PostScript', 'Expertise': 5}, {'Language': 'BASIC', 'Expertise': 4}, {'Language': 'SQL', 'Expertise': 6}, {'Language': 'Assembly', 'Expertise': 8}, {'Language': 'Mathematica', 'Expertise': 10}, {'Language': 'Perl', 'Expertise': 4}, {'Language': 'R', 'Expertise': 9}], 'Previous Employment': [{'Company': 'Dunder Mifflin', 'Position': 'Senior Architect', 'Length of Employment': '3 years 4 months'}], 'Skills': [{'Skill': 'Data Entry', 'Expertise': 6}, {'Skill': 'Maya', 'Expertise': 10}], 'Hobbies': [{'Name': 'Glass blowing', 'Interest': 10}]}}

def test_get_candidate_cv_erroneous():
     with pytest.raises(Exception) as e_info:
        db.get_candidate_cv(mongo, "5c7bfadc0c233c76dbed232as")

def test_get_candidate_cv_erroneous_handled():
     with pytest.raises(Exception) as e_info:
        db.get_candidate_cv(mongo, "5c7bfadc0c233c76dbed232as")

def test_get_candidate_applications():
    db.get_applications(mongo, "5c7bfadc0c233c76dbed232a")
    # assert db.get_applications(mongo, "5c7bfadc0c233c76dbed232as") == 

# def test_get_jobs_list_general():
#     db.getJobsListGeneral(mongo)

# def test_get_jobs_specific():
#     db.get_jobs_list_specific(mongo, "5c7bfadc0c233c76dbed232a")

# def test_get_jobs_specific_normal():
#     assert db.get_jobs_list_specific(mongo, "5c7bfadc0c233c76dbed232a") == [{'_id': ObjectId('5c7bfad70c233c76dbed2131'), 'Job Name': 'Engineer - Devops', 'Job Description': 'We are looking for technologists who demonstrate a passion to build the right thing in the right way. You will will work as part of a multi-skilled agile team, dedicated to improved automation and tooling to support continuous delivery. Your team will work hard to foster increased collaboration and create a Devops culture. You will help us to release our software more frequently, efficiently and with less risk. You will have the opportunity to work on challenging problems, building high- performance systems to process large volumes of data, using the latest technologies.', 'Applicants Required': '100', 'Availability': {'Date Created': datetime.datetime(2019, 3, 3, 16, 3, 35, 511000), 'End Date': datetime.datetime(2019, 3, 28, 16, 3, 35, 511000), 'Report Frequency': '5'}, 'Model CV': {'Approved Universities': ['Imperial College London', 'University of Manchester', 'University of Cambridge', 'Newcastle University', 'University of Cambridge', 'Durham University', 'University of Warwick', 'University of Glasgow', 'University of Exeter', 'University of Nottingham', 'University of Bristol', 'University College London', 'University of Edinburgh'], 'Approved Position': ['Senior Software Developer', 'Systems Analyst', 'Technology Architect', 'Web Developer'], 'Total Work Time': '12', 'Languages Known': [{'Expertise': 6, 'Language': 'C#'}, {'Expertise': 5, 'Language': 'Java'}, {'Expertise': 6, 'Language': 'Python'}, {'Expertise': 7, 'Language': 'Fortran'}], 'Skills': [{'Skill': 'Motivated', 'Expertise': 10}, {'Skill': 'Tablets', 'Expertise': 1}, {'Skill': 'Social media management', 'Expertise': 10}, {'Skill': 'Publisher', 'Expertise': 7}, {'Skill': 'Text Editing', 'Expertise': 6}, {'Skill': 'Payroll', 'Expertise': 2}], 'Approved Degrees': ['Computer Science, MEng', 'Computer Science, BSc', 'Discrete Mathematics, MEng', 'Discrete Mathematics, BSc', 'Computer and Management Sciences, BSc', 'Mathematics and Statistics, BSc', 'Systems Engineering, BEng', 'Computer Systems Engineering, MEng']}, 'Question Difficulty': {'Literacy': '1', 'Numeracy': '1', 'Abstract Reasoning': '1', 'Situational Awareness': '1'}, 'Employee ID': ObjectId('5c7bfad70c233c76dbed212c'), 'Application': ObjectId('5c7bfae90c233c76dbeea9cd')}, {'_id': ObjectId('5c7bfad70c233c76dbed2132'), 'Job Name': 'Engineer - Full Stack', 'Job Description': 'We are looking for technologists who demonstrate a passion to build the right thing in the right way. You will will work as part of a cross-functional agile delivery team, including analysts, developers and testers. You will bring an innovative approach to software development, using the latest technologies and practices, as part of a focus on business value. You will be someone who sees engineering as team activity, with a predisposition to open code, open discussion and creating a supportive, collaborative environment. You will be ready to take a leading role in all stages of software delivery, from intial analysis right through to production support.', 'Applicants Required': '100', 'Availability': {'Date Created': datetime.datetime(2019, 3, 3, 16, 3, 35, 511000), 'End Date': datetime.datetime(2019, 3, 9, 16, 3, 35, 511000), 'Report Frequency': '5'}, 'Model CV': {'Approved Universities': ['Imperial College London', 'University of Manchester', 'University of Cambridge', 'Newcastle University', 'University of Cambridge', 'Durham University', 'University of Warwick', 'University of Glasgow', 'University of Exeter', 'University of Nottingham', 'University of Bristol', 'University College London', 'University of Edinburgh'], 'Approved Position': ['Senior Software Developer', 'Systems Analyst', 'Technology Architect', 'Web Developer'], 'Total Work Time': '12', 'Languages Known': [{'Expertise': 6, 'Language': 'Python'}, {'Expertise': 5, 'Language': 'C'}, {'Expertise': 5, 'Language': 'SQL'}, {'Expertise': 7, 'Language': 'C++'}, {'Expertise': 4, 'Language': 'CUDA'}], 'Skills': [{'Skill': 'Research', 'Expertise': 1}, {'Skill': 'Chinese', 'Expertise': 9}, {'Skill': 'Troubleshooting', 'Expertise': 4}, {'Skill': 'Quality Assurance', 'Expertise': 9}, {'Skill': 'Event Planning', 'Expertise': 8}, {'Skill': 'Guitar', 'Expertise': 6}, {'Skill': 'Accounting', 'Expertise': 9}, {'Skill': 'Text Editing ', 'Expertise ': 7}, {'Skill': 'Public Speaking', 'Expertise': 10}], 'Approved Degrees': ['Computer Science, MEng', 'Computer Science, BSc', 'Discrete Mathematics, MEng', 'Discrete Mathematics, BSc', 'Computer and Management Sciences, BSc', 'Mathematics and Statistics, BSc', 'Systems Engineering, BEng', 'Computer Systems Engineering, MEng']}, 'Question Difficulty': {'Literacy': '1', 'Numeracy': '1', 'Abstract Reasoning': '1', 'Situational Awareness': '1'}, 'Employee ID': ObjectId('5c7bfad70c233c76dbed212c')}, {'_id': ObjectId('5c7bfad70c233c76dbed2133'), 'Job Name': 'Engineer - Hadoop', 'Job Description': 'We are looking for technologists who demonstrate a passion to build the right thing in the right way. You will will work as part of a cross-functional agile delivery team, including analysts, developers and testers. You will bring an innovative approach to software development, using the latest technologies and practices, as part of a relentless focus on business value. You will be someone who sees engineering as team activity, with a predisposition to open code, open discussion and creating a supportive, collaborative environment. You will be ready to contribute to all stages of software delivery, from intial analysis right through to production support.', 'Applicants Required': '100', 'Availability': {'Date Created': datetime.datetime(2019, 3, 3, 16, 3, 35, 511000), 'End Date': datetime.datetime(2019, 4, 2, 16, 3, 35, 511000), 'Report Frequency': '5'}, 'Model CV': {'Approved Universities': ['Imperial College London', 'University of Manchester', 'University of Cambridge', 'Newcastle University', 'University of Cambridge', 'Durham University', 'University of Warwick', 'University of Glasgow', 'University of Exeter', 'University of Nottingham', 'University of Bristol', 'University College London', 'University of Edinburgh'], 'Approved Position': ['Senior Software Developer', 'Systems Analyst', 'Technology Architect', 'Web Developer'], 'Total Work Time': '12', 'Languages Known': [{'Language': 'Java', 'Expertise': 9}, {'Language': 'Haskell', 'Expertise': 9}, {'Language': 'Scala', 'Expertise': 9}, {'Language': 'PhP', 'Expertise': 9}, {'Language': 'Python', 'Expertise': 9}, {'Language': 'SQL', 'Expertise': 9}, {'Language': 'JSON', 'Expertise': 9}], 'Skills': [{'Skill': 'Leadership', 'Expertise': 6}, {'Skill': 'Research', 'Expertise': 10}, {'Skill': 'Team work', 'Expertise': 9}, {'Skill': 'Time management', 'Expertise': 9}, {'Skill': 'Mentoring', 'Expertise': 9}], 'Approved Degrees': ['Computer Science, MEng', 'Computer Science, BSc', 'Discrete Mathematics, MEng', 'Discrete Mathematics, BSc', 'Computer and Management Sciences, BSc', 'Mathematics and Statistics, BSc', 'Systems Engineering, BEng', 'Computer Systems Engineering, MEng']}, 'Question Difficulty': {'Literacy': '1', 'Numeracy': '1', 'Abstract Reasoning': '1', 'Situational Awareness': '1'}, 'Employee ID': ObjectId('5c7bfad70c233c76dbed212c')}]

# def test_2():
#     assert s.permute([1,2,3,4,5,6,7,8,9,0]) == 3628800

# def test_3():
#     assert s.permute([0]) == 1

# def test_4():
#     with pytest.raises(Exception) as e_info:
#         s.permute(0)

# def test_5():
#     assert s.permute([]) == 0
    